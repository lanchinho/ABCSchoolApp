<!--TODO: fazer o update e o delete-->
@page "/schools"
@using ABCShared.Library.Constants

@attribute [ShouldHavePermission(SchoolAction.Read, SchoolFeature.Schools)]

<Header OnReturn="ReturnHome" Title="Schools" Description="Manage Schools" />

<MudTable Items="Schools"
		  Loading="_isLoading"
		  LoadingProgressColor="Color.Info"
		  Elevation="25">
	<ToolBarContent>
		@if (_canCreateSchool)
		{
			<MudFab StartIcon="@Icons.Material.Filled.Add"
					IconSize="Size.Medium"
					OnClick="OnBoardNewSchoolAsync"
					Size="Size.Small"
					Class="mr-2" />
		}
	</ToolBarContent>
	<HeaderContent>
		<MudTh>Name</MudTh>
		<MudTh>Estabilished Date</MudTh>
		<MudTh Style="text-align:right">Actions</MudTh>
	</HeaderContent>
	<RowTemplate>
		<MudTd DataLabel="Name">@context.Name</MudTd>
		<MudTd DataLabel="Estabilished Date">@context.EstablishedDate.ToString("dd/MM/yyyy")</MudTd>
		<MudTd Style="text-align:right" DataLabel="Actions">
			<MudMenu Icon="@Icons.Material.Filled.MoreVert"
					 Size="Size.Small"
					 Color="Color.Secondary"
					 TransformOrigin="Origin.TopLeft"
					 AnchorOrigin="Origin.TopLeft">
				@if (_canUpdateSchool)
				{
					<MudMenuItem>Update</MudMenuItem>
				}
				@if (_canDeleteSchool)
				{
					<MudMenuItem>Delete</MudMenuItem>
				}
			</MudMenu>
		</MudTd>
	</RowTemplate>
	<PagerContent>
		<MudTablePager RowsPerPageString="@rowsPerPageString" InfoFormat="@infoFormat" />
	</PagerContent>
</MudTable>


